(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a4f7182a"],{2264:function(t,e,r){},5304:function(t,e,r){"use strict";r.d(e,"j",(function(){return i})),r.d(e,"o",(function(){return a})),r.d(e,"k",(function(){return o})),r.d(e,"a",(function(){return c})),r.d(e,"e",(function(){return u})),r.d(e,"d",(function(){return l})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return d})),r.d(e,"l",(function(){return m})),r.d(e,"f",(function(){return p})),r.d(e,"h",(function(){return f})),r.d(e,"g",(function(){return h})),r.d(e,"i",(function(){return g})),r.d(e,"m",(function(){return b})),r.d(e,"n",(function(){return j}));var n=r("b775");function i(){return Object(n["a"])({url:"api/Misc/GetProjectAssessmentResults",method:"get"})}function a(){return Object(n["a"])({url:"api/Misc/GetDictCategory",method:"post",data:null})}function o(){return Object(n["a"])({url:"api/Misc/GetProjectAssessmentStatus",method:"get",data:null})}function c(){return Object(n["a"])({url:"api/Misc/EnumHomeAnnouncementType",method:"post",data:null})}function u(){return Object(n["a"])({url:"api/Misc/GetContestStatus",method:"post",data:null})}function l(t){return Object(n["a"])({url:"api/Misc/GetContestInformationSelect?type="+t,method:"post"})}function s(){return Object(n["a"])({url:"api/Misc/EnumTrainMemberStateType",method:"post",data:null})}function d(){return Object(n["a"])({url:"api/Misc/EnumTrainMemberType",method:"post",data:null})}function m(){return Object(n["a"])({url:"api/Misc/GetTrainProjectTypeList",method:"post",data:null})}function p(){return Object(n["a"])({url:"api/Misc/EnumOrderType",method:"post",data:null})}function f(){return Object(n["a"])({url:"api/Misc/EnumReceiptType",method:"post",data:null})}function h(){return Object(n["a"])({url:"api/Misc/EnumReceiptApplyType",method:"post",data:null})}function g(){return Object(n["a"])({url:"api/Misc/GetEquipmentBorrowStatus",method:"post",data:null})}function b(){return Object(n["a"])({url:"api/Misc/GetTutorConfig",method:"post",data:null})}function j(t){return Object(n["a"])({url:"api/Misc/SaveTutorConfig",method:"post",data:t})}},"7b0a":function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"d",(function(){return i})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return o})),r.d(e,"e",(function(){return c}));r("6b54"),r("c5f6");function n(t,e,r){if(!e)return r(new Error("输入不可以为空"));setTimeout((function(){if(Number(e)){var t=/^[0-9]*[1-9][0-9]*$/,n=t.test(e);n?r():r(new Error("请输入正整数"))}else r(new Error("请输入正整数"))}),0)}function i(t,e,r){var n=/^[1][3-9][0-9]{9}$/;""==e||void 0==e||null==e?r(new Error("请输入正确的电话号码")):n.test(e)||""==e?r():r(new Error("请输入正确的电话号码"))}function a(t,e,r){var n=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9]+\.[a-z]+$/;""==e||void 0==e||null==e?r(new Error("请输入正确的邮箱")):n.test(e)?r():r(new Error("请输入正确的邮箱"))}function o(t,e,r){""==e||void 0==e||null==e||-1==e.indexOf("@")?r(new Error("请输入正确的邮箱")):r()}function c(t,e,r){if(void 0==e||null==e)return r(new Error("输入不可以为空"));setTimeout((function(){e=e.toString(),e.length>0?e.length>3||parseFloat(e)<.1||parseFloat(e)>.9?r(new Error("输入0.1-0.9之间")):r():r(new Error("输入不可以为空"))}),0)}},"8a87":function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"m",(function(){return a})),r.d(e,"l",(function(){return o})),r.d(e,"h",(function(){return c})),r.d(e,"c",(function(){return u})),r.d(e,"k",(function(){return l})),r.d(e,"g",(function(){return s})),r.d(e,"e",(function(){return d})),r.d(e,"b",(function(){return m})),r.d(e,"j",(function(){return p})),r.d(e,"f",(function(){return f})),r.d(e,"d",(function(){return h})),r.d(e,"i",(function(){return g}));var n=r("b775");function i(t){return Object(n["a"])({url:"api/TrainManage/AddTrainProject",method:"post",data:t})}function a(t){return Object(n["a"])({url:"api/TrainManage/UpdateTrainProject",method:"post",data:t})}function o(t){return Object(n["a"])({url:"api/TrainManage/TrainProjectList",method:"post",data:t})}function c(t){return Object(n["a"])({url:"api/TrainManage/GetTrainProject/"+t,method:"get",data:null})}function u(t){return Object(n["a"])({url:"api/TrainManage/EnableTrainProject",method:"post",data:t})}function l(t){return Object(n["a"])({url:"api/TrainManage/TrainMemberList",method:"post",data:t})}function s(t){return Object(n["a"])({url:"api/TrainManage/GetTrainMember/"+t,method:"get",data:null})}function d(t){return Object(n["a"])({url:"api/TrainManage/ExamineTrainMember",method:"post",data:t})}function m(t){return Object(n["a"])({url:"api/TrainManage/EnableTrainMember",method:"post",data:t})}function p(t){return Object(n["a"])({url:"api/TrainManage/TrainApplicationList",method:"post",data:t})}function f(t){return Object(n["a"])({url:"api/TrainManage/GetTrainApplication/"+t,method:"get",data:null})}function h(t){return Object(n["a"])({url:"api/TrainManage/ExamineTrainApplication",method:"post",data:t})}function g(t){return Object(n["a"])({url:"api/PayManage/PayOrderList",method:"post",data:t})}},ab6c:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"maindetail"},[r("div",{staticClass:"titleTel"},[t._v(t._s(0===t.isEdit?"新增非常规项目":1===t.isEdit?"编辑非常规项目":"查看非常规项目"))]),r("div",{staticStyle:{width:"100%"}},[r("el-form",{ref:"formInit",attrs:{model:t.formInit,"label-width":"150px",rules:t.rules}},[r("el-form-item",{attrs:{label:"封面图",prop:"CoverPicture"}},[t.formInit.CoverPicture?r("div",{staticClass:"FileUpload",staticStyle:{width:"148px",height:"148px","line-height":"148px"}},[r("div",{staticClass:"fileDiv",staticStyle:{width:"148px",height:"148px","line-height":"148px",margin:"0px"}},[r("img",{attrs:{src:t.formInit.ShowLink,alt:""}}),r("div",{staticClass:"fileDivBg",on:{click:t.imgDeleteClick}},[r("i",{staticClass:"el-icon-delete"})])])]):r("div",{staticClass:"avatar-uploader"},[r("ul",{staticClass:"el-upload-list el-upload-list--picture-card"}),r("div",{staticClass:"el-upload el-upload--picture-card",attrs:{tabindex:"0"},on:{click:t.imgChoseClick}},[r("i",{staticClass:"el-icon-plus"})]),r("div",{staticClass:"el-upload__tip"},[t._v("只能上传jpg/png文件，且不超过2MB,建议尺寸380*179")])])]),r("el-form-item",{attrs:{label:"项目类型",prop:"ProjectType"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formInit.ProjectType,callback:function(e){t.$set(t.formInit,"ProjectType",e)},expression:"formInit.ProjectType"}},t._l(t.projectTypes,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),r("el-form-item",{attrs:{label:"中文项目名称",prop:"ProjectName"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formInit.ProjectName,callback:function(e){t.$set(t.formInit,"ProjectName",e)},expression:"formInit.ProjectName"}})],1),r("el-form-item",{attrs:{label:"英文项目名称",prop:"ProjectNameEn"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formInit.ProjectNameEn,callback:function(e){t.$set(t.formInit,"ProjectNameEn",e)},expression:"formInit.ProjectNameEn"}})],1),r("el-form-item",{attrs:{label:"项目开始日期",prop:"ProjectStart"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"请输入",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","clear-icon":""},model:{value:t.formInit.ProjectStart,callback:function(e){t.$set(t.formInit,"ProjectStart",e)},expression:"formInit.ProjectStart"}})],1),r("el-form-item",{attrs:{label:"项目结束日期",prop:"ProjectEnd"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"请输入",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","clear-icon":""},model:{value:t.formInit.ProjectEnd,callback:function(e){t.$set(t.formInit,"ProjectEnd",e)},expression:"formInit.ProjectEnd"}})],1),r("el-form-item",{attrs:{label:"中文项目详情",prop:"ProjectDetail"}},[r("editTinymce",{attrs:{val:t.formInit.ProjectDetail,disabled:2==t.isEdit},on:{getval:t.changvalCN}})],1),r("el-form-item",{attrs:{label:"英文项目详情",prop:"ProjectDetailEn"}},[r("editTinymce",{attrs:{val:t.formInit.ProjectDetailEn,disabled:2==t.isEdit},on:{getval:t.changvalEN}})],1),r("el-form-item",{attrs:{label:"联系人",prop:"Contacts"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formInit.Contacts,callback:function(e){t.$set(t.formInit,"Contacts",e)},expression:"formInit.Contacts"}})],1),r("el-form-item",{attrs:{label:"联系电话",prop:"Phone"}},[r("el-input",{attrs:{placeholder:"请输入",type:"number"},model:{value:t.formInit.Phone,callback:function(e){t.$set(t.formInit,"Phone",e)},expression:"formInit.Phone"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"Email"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formInit.Email,callback:function(e){t.$set(t.formInit,"Email",e)},expression:"formInit.Email"}})],1),r("el-form-item",{attrs:{label:"项目状态",prop:"State"}},[r("el-radio-group",{attrs:{disabled:2===t.isEdit},model:{value:t.formInit.State,callback:function(e){t.$set(t.formInit,"State",e)},expression:"formInit.State"}},[r("el-radio",{attrs:{label:0,size:"small"}},[t._v("启用")]),r("el-radio",{attrs:{label:1,size:"small"}},[t._v("禁用")])],1)],1)],1)],1),r("div",{staticClass:"bottomButton"},[r("el-button",{attrs:{icon:"el-icon-back",size:"small",type:"info"},on:{click:t.goBack}},[t._v("返回")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:2!=t.isEdit,expression:"isEdit != 2"}],attrs:{icon:"el-icon-circle-check",size:"small",type:"primary"},on:{click:function(e){return t.onSubmit("formInit")}}},[t._v("保存")])],1)])},i=[],a=(r("c5f6"),r("8a87")),o=r("5304"),c=r("7b0a"),u=r("b893"),l=r("95797"),s={name:"index",components:{editTinymce:l["a"]},props:{isEdit:{type:Number,default:0}},computed:{},data:function(){return{formInit:{CoverPicture:"",ShowLink:"",ProjectType:"",ProjectName:"",ProjectNameEn:"",Price:"",Discount:"",ProjectStart:"",ProjectEnd:"",SignStart:"",SignEnd:"",ProjectDetail:"",ProjectDetailEn:"",Contacts:"",Phone:"",Email:"",State:0,RoutineType:"1"},isCropper:!1,projectTypes:[],rules:{ProjectType:[{required:!0,message:"项目类型不能为空",trigger:"blur"}],ProjectName:[{required:!0,message:"中文项目名称不能为空",trigger:"blur"}],ProjectNameEn:[{required:!0,message:"英文项目名称不能为空",trigger:"blur"}],ProjectStart:[{required:!0,message:"项目开始日期不能为空",trigger:"blur"}],ProjectEnd:[{required:!0,message:"项目结束日期不能为空",trigger:"blur"}],ProjectDetail:[{required:!0,message:"中文项目详情不能为空",trigger:"blur"}],ProjectDetailEn:[{required:!0,message:"英文项目详情不能为空",trigger:"blur"}],Contacts:[{required:!0,message:"联系人不能为空",trigger:"blur"}],Phone:[{required:!0,message:"联系电话不能为空",trigger:"blur"}],Email:[{required:!0,validator:c["c"],trigger:"blur"}],State:[{required:!0,message:"项目状态不能为空",trigger:"blur"}],CoverPicture:[{required:!0,message:"请选择封面图",trigger:"blur"}]}}},watch:{"formInit.ProjectStart":function(t,e){t&&this.changeProjectDate(t,e,"start")},"formInit.ProjectEnd":function(t,e){t&&this.changeProjectDate(t,e,"end")}},created:function(){this.isCropper=this.$route.query.isCropper,this.getTrainProjectTypeList(),1===this.isEdit||2===this.isEdit?this.getDetail():this.setCropperImg()},mounted:function(){},methods:{changvalCN:function(t){this.formInit.ProjectDetail=t},changvalEN:function(t){this.formInit.ProjectDetailEn=t},getTrainProjectTypeList:function(){var t=this;Object(o["l"])().then((function(e){0===e.data.Code&&(t.projectTypes=e.data.Data)}))},getDetail:function(){var t=this;Object(a["h"])(this.$route.query.id).then((function(e){0===e.data.Code&&(t.formInit=e.data.Data,t.formInit.CoverPicture=e.data.Data.CoverPicture,t.formInit.ShowLink=e.data.Data.ShowLink,t.setCropperImg())}))},goBack:function(){this.clearCropperImg(),this.$router.push("/train_unRoutine")},changeProjectDate:function(t,e,r){this.formInit.ProjectStart&&this.formInit.ProjectEnd&&(Object(u["d"])(this.formInit.ProjectStart,this.formInit.ProjectEnd)||("start"==r?this.formInit.ProjectStart=e:this.formInit.ProjectEnd=e,this.$message.closeAll(),this.$message.warning("项目开始时间必须早于项目结束时间")))},onSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;1===e.isEdit?e.onUpdate():0===e.isEdit&&e.onAdd()}))},onAdd:function(){var t=this;Object(a["a"])(this.formInit).then((function(e){0===e.data.Code&&(t.goBack(),t.$message.success("保存成功"))}))},onUpdate:function(){var t=this;this.formInit.Id=this.$route.query.id,Object(a["m"])(this.formInit).then((function(e){0===e.data.Code&&(t.goBack(),t.$message.success("保存成功"))}))},setCropperImg:function(){this.isCropper&&(localStorage.getItem("trainunRoutineCropperFileId")&&(this.formInit.CoverPicture=localStorage.getItem("trainunRoutineCropperFileId")),localStorage.getItem("trainunRoutineCropperShowLink")&&(this.formInit.ShowLink=localStorage.getItem("trainunRoutineCropperShowLink")))},clearCropperImg:function(){localStorage.removeItem("trainunRoutineCropperFileId"),localStorage.removeItem("trainunRoutineCropperShowLink")},imgChoseClick:function(){this.$router.push({path:"/train_unRoutine_cropper",query:{id:this.$route.query.id,width:380,height:179}})},imgDeleteClick:function(){this.formInit.CoverPicture="",this.formInit.ShowLink=""}}},d=s,m=(r("e68e"),r("2877")),p=Object(m["a"])(d,n,i,!1,null,null,null);e["a"]=p.exports},bc49:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("edit-template",{attrs:{"is-edit":1}})},i=[],a=r("ab6c"),o={name:"EditeForm",components:{editTemplate:a["a"]}},c=o,u=r("2877"),l=Object(u["a"])(c,n,i,!1,null,null,null);e["default"]=l.exports},e68e:function(t,e,r){"use strict";var n=r("2264"),i=r.n(n);i.a}}]);