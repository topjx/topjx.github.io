(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aafd59f8"],{2005:function(t,e,r){},5304:function(t,e,r){"use strict";r.d(e,"j",(function(){return n})),r.d(e,"o",(function(){return a})),r.d(e,"k",(function(){return o})),r.d(e,"a",(function(){return c})),r.d(e,"e",(function(){return s})),r.d(e,"d",(function(){return l})),r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return d})),r.d(e,"l",(function(){return m})),r.d(e,"f",(function(){return f})),r.d(e,"h",(function(){return p})),r.d(e,"g",(function(){return g})),r.d(e,"i",(function(){return h})),r.d(e,"m",(function(){return b})),r.d(e,"n",(function(){return j}));var i=r("b775");function n(){return Object(i["a"])({url:"api/Misc/GetProjectAssessmentResults",method:"get"})}function a(){return Object(i["a"])({url:"api/Misc/GetDictCategory",method:"post",data:null})}function o(){return Object(i["a"])({url:"api/Misc/GetProjectAssessmentStatus",method:"get",data:null})}function c(){return Object(i["a"])({url:"api/Misc/EnumHomeAnnouncementType",method:"post",data:null})}function s(){return Object(i["a"])({url:"api/Misc/GetContestStatus",method:"post",data:null})}function l(t){return Object(i["a"])({url:"api/Misc/GetContestInformationSelect?type="+t,method:"post"})}function u(){return Object(i["a"])({url:"api/Misc/EnumTrainMemberStateType",method:"post",data:null})}function d(){return Object(i["a"])({url:"api/Misc/EnumTrainMemberType",method:"post",data:null})}function m(){return Object(i["a"])({url:"api/Misc/GetTrainProjectTypeList",method:"post",data:null})}function f(){return Object(i["a"])({url:"api/Misc/EnumOrderType",method:"post",data:null})}function p(){return Object(i["a"])({url:"api/Misc/EnumReceiptType",method:"post",data:null})}function g(){return Object(i["a"])({url:"api/Misc/EnumReceiptApplyType",method:"post",data:null})}function h(){return Object(i["a"])({url:"api/Misc/GetEquipmentBorrowStatus",method:"post",data:null})}function b(){return Object(i["a"])({url:"api/Misc/GetTutorConfig",method:"post",data:null})}function j(t){return Object(i["a"])({url:"api/Misc/SaveTutorConfig",method:"post",data:t})}},"7b0a":function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"d",(function(){return n})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return o})),r.d(e,"e",(function(){return c}));r("6b54"),r("c5f6");function i(t,e,r){if(!e)return r(new Error("输入不可以为空"));setTimeout((function(){if(Number(e)){var t=/^[0-9]*[1-9][0-9]*$/,i=t.test(e);i?r():r(new Error("请输入正整数"))}else r(new Error("请输入正整数"))}),0)}function n(t,e,r){var i=/^[1][3-9][0-9]{9}$/;""==e||void 0==e||null==e?r(new Error("请输入正确的电话号码")):i.test(e)||""==e?r():r(new Error("请输入正确的电话号码"))}function a(t,e,r){var i=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9]+\.[a-z]+$/;""==e||void 0==e||null==e?r(new Error("请输入正确的邮箱")):i.test(e)?r():r(new Error("请输入正确的邮箱"))}function o(t,e,r){""==e||void 0==e||null==e||-1==e.indexOf("@")?r(new Error("请输入正确的邮箱")):r()}function c(t,e,r){if(void 0==e||null==e)return r(new Error("输入不可以为空"));setTimeout((function(){e=e.toString(),e.length>0?e.length>3||parseFloat(e)<.1||parseFloat(e)>.9?r(new Error("输入0.1-0.9之间")):r():r(new Error("输入不可以为空"))}),0)}},"8a87":function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"m",(function(){return a})),r.d(e,"l",(function(){return o})),r.d(e,"h",(function(){return c})),r.d(e,"c",(function(){return s})),r.d(e,"k",(function(){return l})),r.d(e,"g",(function(){return u})),r.d(e,"e",(function(){return d})),r.d(e,"b",(function(){return m})),r.d(e,"j",(function(){return f})),r.d(e,"f",(function(){return p})),r.d(e,"d",(function(){return g})),r.d(e,"i",(function(){return h}));var i=r("b775");function n(t){return Object(i["a"])({url:"api/TrainManage/AddTrainProject",method:"post",data:t})}function a(t){return Object(i["a"])({url:"api/TrainManage/UpdateTrainProject",method:"post",data:t})}function o(t){return Object(i["a"])({url:"api/TrainManage/TrainProjectList",method:"post",data:t})}function c(t){return Object(i["a"])({url:"api/TrainManage/GetTrainProject/"+t,method:"get",data:null})}function s(t){return Object(i["a"])({url:"api/TrainManage/EnableTrainProject",method:"post",data:t})}function l(t){return Object(i["a"])({url:"api/TrainManage/TrainMemberList",method:"post",data:t})}function u(t){return Object(i["a"])({url:"api/TrainManage/GetTrainMember/"+t,method:"get",data:null})}function d(t){return Object(i["a"])({url:"api/TrainManage/ExamineTrainMember",method:"post",data:t})}function m(t){return Object(i["a"])({url:"api/TrainManage/EnableTrainMember",method:"post",data:t})}function f(t){return Object(i["a"])({url:"api/TrainManage/TrainApplicationList",method:"post",data:t})}function p(t){return Object(i["a"])({url:"api/TrainManage/GetTrainApplication/"+t,method:"get",data:null})}function g(t){return Object(i["a"])({url:"api/TrainManage/ExamineTrainApplication",method:"post",data:t})}function h(t){return Object(i["a"])({url:"api/PayManage/PayOrderList",method:"post",data:t})}},ebc6:function(t,e,r){"use strict";var i=r("2005"),n=r.n(i);n.a},fc0d:function(t,e,r){"use strict";var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"maindetail"},[r("div",{staticClass:"titleTel"},[t._v(t._s(0===t.isEdit?"新增常规项目":1===t.isEdit?"编辑常规项目":"查看常规项目"))]),r("div",{staticStyle:{width:"100%"}},[r("el-form",{ref:"formInit",attrs:{model:t.formInit,"label-width":"150px",rules:t.rules}},[r("el-form-item",{attrs:{label:"封面图",prop:"CoverPicture"}},[t.formInit.CoverPicture?r("div",{staticClass:"FileUpload",staticStyle:{width:"148px",height:"148px","line-height":"148px"}},[r("div",{staticClass:"fileDiv",staticStyle:{width:"148px",height:"148px","line-height":"148px",margin:"0px"}},[r("img",{attrs:{src:t.formInit.ShowLink,alt:""}}),r("div",{staticClass:"fileDivBg",on:{click:t.imgDeleteClick}},[r("i",{staticClass:"el-icon-delete"})])])]):r("div",{staticClass:"avatar-uploader"},[r("ul",{staticClass:"el-upload-list el-upload-list--picture-card"}),r("div",{staticClass:"el-upload el-upload--picture-card",attrs:{tabindex:"0"},on:{click:t.imgChoseClick}},[r("i",{staticClass:"el-icon-plus"})]),r("div",{staticClass:"el-upload__tip"},[t._v("只能上传jpg/png文件，且不超过2MB,建议尺寸380*179")])])]),r("el-form-item",{attrs:{label:"项目类型",prop:"ProjectType"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formInit.ProjectType,callback:function(e){t.$set(t.formInit,"ProjectType",e)},expression:"formInit.ProjectType"}},t._l(t.projectTypes,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),r("el-form-item",{attrs:{label:"中文项目名称",prop:"ProjectName"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formInit.ProjectName,callback:function(e){t.$set(t.formInit,"ProjectName",e)},expression:"formInit.ProjectName"}})],1),r("el-form-item",{attrs:{label:"英文项目名称",prop:"ProjectNameEn"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formInit.ProjectNameEn,callback:function(e){t.$set(t.formInit,"ProjectNameEn",e)},expression:"formInit.ProjectNameEn"}})],1),r("el-form-item",{attrs:{label:"非会员价",prop:"Price"}},[r("el-input",{attrs:{placeholder:"请输入",type:"number"},model:{value:t.formInit.Price,callback:function(e){t.$set(t.formInit,"Price",e)},expression:"formInit.Price"}})],1),r("el-form-item",{attrs:{label:"会员折扣",prop:"Discount"}},[r("el-input",{attrs:{placeholder:"请输入",step:.1,min:.1,max:.9,type:"number"},model:{value:t.formInit.Discount,callback:function(e){t.$set(t.formInit,"Discount",e)},expression:"formInit.Discount"}})],1),r("el-form-item",{attrs:{label:"项目开始日期",prop:"ProjectStart"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"请输入",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","clear-icon":""},model:{value:t.formInit.ProjectStart,callback:function(e){t.$set(t.formInit,"ProjectStart",e)},expression:"formInit.ProjectStart"}})],1),r("el-form-item",{attrs:{label:"项目结束日期",prop:"ProjectEnd"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"请输入",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","clear-icon":""},model:{value:t.formInit.ProjectEnd,callback:function(e){t.$set(t.formInit,"ProjectEnd",e)},expression:"formInit.ProjectEnd"}})],1),r("el-form-item",{attrs:{label:"报名开始时间",prop:"SignStart"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"请输入",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm","clear-icon":""},model:{value:t.formInit.SignStart,callback:function(e){t.$set(t.formInit,"SignStart",e)},expression:"formInit.SignStart"}})],1),r("el-form-item",{attrs:{label:"报名结束时间",prop:"SignEnd"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"请输入",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm","clear-icon":""},model:{value:t.formInit.SignEnd,callback:function(e){t.$set(t.formInit,"SignEnd",e)},expression:"formInit.SignEnd"}})],1),r("el-form-item",{attrs:{label:"ICE课程地址",prop:"ICEUrl"}},[r("el-input",{attrs:{placeholder:"请输入完整的链接地址(https://iih.mmbbsay.com)"},model:{value:t.formInit.ICEUrl,callback:function(e){t.$set(t.formInit,"ICEUrl",e)},expression:"formInit.ICEUrl"}})],1),r("el-form-item",{attrs:{label:"中文项目详情",prop:"ProjectDetail"}},[r("editTinymce",{attrs:{val:t.formInit.ProjectDetail,disabled:2==t.isEdit},on:{getval:t.changvalCN}})],1),r("el-form-item",{attrs:{label:"英文项目详情",prop:"ProjectDetailEn"}},[r("editTinymce",{attrs:{val:t.formInit.ProjectDetailEn,disabled:2==t.isEdit},on:{getval:t.changvalEN}})],1),r("el-form-item",{attrs:{label:"项目状态",prop:"State"}},[r("el-radio-group",{attrs:{disabled:2===t.isEdit},model:{value:t.formInit.State,callback:function(e){t.$set(t.formInit,"State",e)},expression:"formInit.State"}},[r("el-radio",{attrs:{label:0,size:"small"}},[t._v("启用")]),r("el-radio",{attrs:{label:1,size:"small"}},[t._v("禁用")])],1)],1)],1)],1),r("div",{staticClass:"bottomButton"},[r("el-button",{attrs:{icon:"el-icon-back",size:"small",type:"info"},on:{click:t.goBack}},[t._v("返回")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:2!=t.isEdit,expression:"isEdit != 2"}],attrs:{icon:"el-icon-circle-check",size:"small",type:"primary"},on:{click:function(e){return t.onSubmit("formInit")}}},[t._v("保存")])],1)])},n=[],a=(r("c5f6"),r("8a87")),o=r("5304"),c=r("7b0a"),s=r("b893"),l=r("95797"),u={name:"index",components:{editTinymce:l["a"]},props:{isEdit:{type:Number,default:0}},computed:{},data:function(){return{formInit:{CoverPicture:"",ShowLink:"",ProjectType:"",ProjectName:"",ProjectNameEn:"",Price:"",Discount:"",ProjectStart:"",ProjectEnd:"",SignStart:"",SignEnd:"",ICEUrl:"",ProjectDetail:"",ProjectDetailEn:"",Contacts:"",Phone:"",Email:"",State:0,RoutineType:"0"},isCropper:!1,projectTypes:[],rules:{ProjectType:[{required:!0,message:"项目类型不能为空",trigger:"blur"}],ProjectName:[{required:!0,message:"中文项目名称不能为空",trigger:"blur"}],ProjectNameEn:[{required:!0,message:"英文项目名称不能为空",trigger:"blur"}],Price:[{required:!0,message:"非会员价不能为空",trigger:"blur"}],Discount:[{required:!0,validator:c["e"],trigger:"blur"}],ProjectStart:[{required:!0,message:"项目开始日期不能为空",trigger:"blur"}],ProjectEnd:[{required:!0,message:"项目结束日期不能为空",trigger:"blur"}],SignStart:[{required:!0,message:"报名开始时间不能为空",trigger:"blur"}],SignEnd:[{required:!0,message:"报名结束时间不能为空",trigger:"blur"}],ICEUrl:[{required:!0,message:"ICE课程地址不能为空",trigger:"blur"}],ProjectDetail:[{required:!0,message:"中文项目详情不能为空",trigger:"blur"}],ProjectDetailEn:[{required:!0,message:"英文项目详情不能为空",trigger:"blur"}],State:[{required:!0,message:"项目状态不能为空",trigger:"blur"}],CoverPicture:[{required:!0,message:"请选择封面图",trigger:"blur"}]}}},watch:{"formInit.ProjectStart":function(t,e){t&&this.changeProjectDate(t,e,"start")},"formInit.ProjectEnd":function(t,e){t&&this.changeProjectDate(t,e,"end")},"formInit.SignStart":function(t,e){t&&this.changeSignTime(t,e,"start")},"formInit.SignEnd":function(t,e){t&&this.changeSignTime(t,e,"end")}},created:function(){this.isCropper=this.$route.query.isCropper,this.getTrainProjectTypeList(),1===this.isEdit||2===this.isEdit?this.getDetail():this.setCropperImg()},mounted:function(){},methods:{changvalCN:function(t){this.formInit.ProjectDetail=t},changvalEN:function(t){this.formInit.ProjectDetailEn=t},getTrainProjectTypeList:function(){var t=this;Object(o["l"])().then((function(e){0===e.data.Code&&(t.projectTypes=e.data.Data)}))},getDetail:function(){var t=this;Object(a["h"])(this.$route.query.id).then((function(e){0===e.data.Code&&(t.formInit=e.data.Data,t.formInit.CoverPicture=e.data.Data.CoverPicture,t.formInit.ShowLink=e.data.Data.ShowLink,t.setCropperImg())}))},goBack:function(){this.clearCropperImg(),this.$router.push("/train_routine")},changeProjectDate:function(t,e,r){this.formInit.ProjectStart&&this.formInit.ProjectEnd&&(Object(s["d"])(this.formInit.ProjectStart,this.formInit.ProjectEnd)||("start"==r?this.formInit.ProjectStart=e:this.formInit.ProjectEnd=e,this.$message.closeAll(),this.$message.warning("项目开始时间必须早于项目结束时间")))},changeSignTime:function(t,e,r){var i="";if(this.formInit.ProjectStart?this.formInit.ProjectEnd||(i="请先选择项目结束时间"):i="请先选择项目开始时间",i)return"start"==r?this.formInit.SignStart=e:this.formInit.SignEnd=e,this.$message.closeAll(),void this.$message.warning(i);var n=t.substring(0,10);if(Object(s["c"])(this.formInit.ProjectStart,n)?"start"==r?(i="报名开始时间不能早于项目开始时间",this.formInit.SignStart=e):(i="报名结束时间不能早于项目开始时间",this.formInit.SignEnd=e):Object(s["d"])(this.formInit.ProjectEnd,n)&&("start"==r?(i="报名开始时间不能晚于项目结束时间",this.formInit.SignStart=e):(i="报名结束时间不能晚于项目结束时间",this.formInit.SignEnd=e)),i)return this.$message.closeAll(),void this.$message.warning(i);this.formInit.SignStart&&this.formInit.SignEnd&&(Object(s["d"])(this.formInit.SignStart,this.formInit.SignEnd)||("start"==r?this.formInit.SignStart=e:this.formInit.SignEnd=e,this.$message.closeAll(),this.$message.warning("报名开始时间必须早于报名结束时间")))},onSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;1===e.isEdit?e.onUpdate():0===e.isEdit&&e.onAdd()}))},onAdd:function(){var t=this;Object(a["a"])(this.formInit).then((function(e){0===e.data.Code&&(t.goBack(),t.$message.success("保存成功"))}))},onUpdate:function(){var t=this;this.formInit.Id=this.$route.query.id,Object(a["m"])(this.formInit).then((function(e){0===e.data.Code&&(t.goBack(),t.$message.success("保存成功"))}))},setCropperImg:function(){this.isCropper&&(localStorage.getItem("trainRoutineCropperFileId")&&(this.formInit.CoverPicture=localStorage.getItem("trainRoutineCropperFileId")),localStorage.getItem("trainRoutineCropperShowLink")&&(this.formInit.ShowLink=localStorage.getItem("trainRoutineCropperShowLink")))},clearCropperImg:function(){localStorage.removeItem("trainRoutineCropperFileId"),localStorage.removeItem("trainRoutineCropperShowLink")},imgChoseClick:function(){this.$router.push({path:"/train_routine_cropper",query:{id:this.$route.query.id,width:380,height:179}})},imgDeleteClick:function(){this.formInit.CoverPicture="",this.formInit.ShowLink=""}}},d=u,m=(r("ebc6"),r("2877")),f=Object(m["a"])(d,i,n,!1,null,null,null);e["a"]=f.exports}}]);