(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08913bee"],{"64bf":function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"processTel"},[r("el-card",[r("div",{staticClass:"processTelTitle"},[e._v(" "+e._s(0==e.isEdit?"新增邮件模板":1==e.isEdit?"编辑邮件模板":2==e.isEdit?"查看邮件模板":"")+" ")]),r("process-prev",{attrs:{id:e.id,isEdit:e.isEdit}})],1)],1)},a=[],n=(r("c5f6"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"processTelPrev"},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",rules:e.infoRules}},[r("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"模板名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入",disabled:2==e.isEdit,maxlength:"20"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"消息标题",prop:"year"}},[r("el-input",{attrs:{placeholder:"请输入",disabled:2==e.isEdit,maxlength:"20"},model:{value:e.form.year,callback:function(t){e.$set(e.form,"year",t)},expression:"form.year"}})],1),r("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"附加收件人",prop:""}},[r("el-input",{attrs:{disabled:2==e.isEdit,placeholder:"请输入"},model:{value:e.form.receiver,callback:function(t){e.$set(e.form,"receiver",t)},expression:"form.receiver"}})],1),r("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"附加抄送人",prop:""}},[r("el-input",{attrs:{disabled:2==e.isEdit,placeholder:"请输入"},model:{value:e.form.cope,callback:function(t){e.$set(e.form,"cope",t)},expression:"form.cope"}})],1),r("el-form-item",{attrs:{label:"参数描述"}},[r("el-input",{attrs:{type:"textarea",disabled:"",autosize:""},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),r("el-form-item",{attrs:{label:"内容",prop:"info"}},[r("tinymce",{attrs:{val:e.form.info,disabled:2==e.isEdit},on:{getval:e.changval}})],1)],1),r("div",{staticClass:"bottomButton"},[r("el-button",{attrs:{icon:"el-icon-circle-close",size:"small",type:"info"},on:{click:e.goBack}},[e._v("取消")]),e.id||2===e.isEdit?e._e():r("el-button",{attrs:{icon:"el-icon-circle-check",size:"small",type:"primary"},on:{click:e.addInfo}},[e._v("确定")]),e.id&&2!==e.isEdit?r("el-button",{attrs:{icon:"el-icon-circle-check",size:"small",type:"primary"},on:{click:function(t){return e.editInfo("form")}}},[e._v("确定")]):e._e()],1)],1)}),o=[],s=(r("7f7f"),r("95797")),l=(r("96cf"),r("3b8d")),c=r("b775");function u(e){return d.apply(this,arguments)}function d(){return d=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])({url:"api/Template/AddMailTemplate",method:"post",data:t});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function f(e){return m.apply(this,arguments)}function m(){return m=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])({url:"api/Template/GetMailTemplateDetail/"+t,method:"post",data:t});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return h=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])({url:"api/Template/UpdateMailTemplate",method:"post",data:t});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}var b=r("5c96"),v={name:"index",components:{tinymce:s["a"]},props:{isEdit:{type:Number,default:0},id:{type:String,default:""}},watch:{form:{handler:function(e,t){console.log(e)},deep:!0}},data:function(){return{infoRules:{name:[{required:!0,message:"模板名称必填",trigger:"blur"}],year:[{required:!0,message:"标题必填",trigger:"blur"}],info:[{required:!0,message:"内容必填",trigger:"blur"}],receiver:[{required:!0,message:"收件人必填",trigger:"blur"}],cope:[{required:!0,message:"收件人必填",trigger:"blur"}]},form:{name:"",target:"",info:"",year:"",receiver:"",cope:"",desc:""},targetData:[{value:"0",label:"浙江"}]}},created:function(){""!==this.id&&this.getDetail()},mounted:function(){},methods:{changval:function(e){this.form.info=e},goBack:function(){this.$router.go(-1)},addInfo:function(){var e=this;if(""==this.form.info)this.$message.error("请填写邮件内容");else{var t={TemplateName:this.form.name,Title:this.form.year,Content:this.form.info,AdditionalCC:this.form.cope,AdditionalTO:this.form.receiver};u(t).then((function(t){0==t.data.Code&&(Object(b["Message"])({message:t.Message||"新增成功",type:"success"}),e.$router.go(-1))}))}},editInfo:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r={id:t.id,TemplateName:t.form.name,Title:t.form.year,Content:t.form.info,AdditionalCC:t.form.cope,AdditionalTO:t.form.receiver};p(r).then((function(e){0==e.data.Code&&(Object(b["Message"])({message:e.Message||"编辑成功",type:"success"}),t.$router.go(-1))}))}))},getDetail:function(){var e=this,t=this.id;f(t).then((function(t){var r=t.data.Data;e.form.name=r.TemplateName,e.form.year=r.Title,e.form.info=r.Content,e.form.cope=r.AdditionalCC,e.form.receiver=r.AdditionalTO,e.form.desc=r.Desc}))}}},g=v,y=(r("f049"),r("2877")),x=Object(y["a"])(g,n,o,!1,null,"0760b15c",null),w=x.exports,T={name:"index",components:{processPrev:w},props:{isEdit:{type:Number,default:0},id:{type:String,default:""}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}},k=T,E=(r("afe4"),Object(y["a"])(k,i,a,!1,null,null,null));t["a"]=E.exports},"95e1":function(e,t,r){},9714:function(e,t,r){},afe4:function(e,t,r){"use strict";var i=r("9714"),a=r.n(i);a.a},cc88:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("edit-template",{attrs:{"is-edit":2,id:e.id}})},a=[],n=r("64bf"),o={name:"CreateForm",components:{editTemplate:n["a"]},data:function(){return{id:this.$route.query.id}}},s=o,l=r("2877"),c=Object(l["a"])(s,i,a,!1,null,null,null);t["default"]=c.exports},f049:function(e,t,r){"use strict";var i=r("95e1"),a=r.n(i);a.a}}]);