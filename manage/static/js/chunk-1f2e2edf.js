(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f2e2edf"],{"2c51":function(t,e,n){"use strict";n.d(e,"n",(function(){return o})),n.d(e,"m",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"B",(function(){return u})),n.d(e,"l",(function(){return s})),n.d(e,"k",(function(){return c})),n.d(e,"a",(function(){return l})),n.d(e,"A",(function(){return d})),n.d(e,"j",(function(){return f})),n.d(e,"g",(function(){return m})),n.d(e,"D",(function(){return p})),n.d(e,"i",(function(){return h})),n.d(e,"h",(function(){return g})),n.d(e,"c",(function(){return C})),n.d(e,"q",(function(){return b})),n.d(e,"f",(function(){return v})),n.d(e,"w",(function(){return I})),n.d(e,"y",(function(){return k})),n.d(e,"d",(function(){return O})),n.d(e,"s",(function(){return N})),n.d(e,"r",(function(){return j})),n.d(e,"p",(function(){return M})),n.d(e,"o",(function(){return w})),n.d(e,"C",(function(){return E})),n.d(e,"u",(function(){return S})),n.d(e,"v",(function(){return T})),n.d(e,"t",(function(){return _})),n.d(e,"e",(function(){return y})),n.d(e,"x",(function(){return D})),n.d(e,"z",(function(){return $}));var a=n("b775");function o(t){return Object(a["a"])({url:"api/ContestManage/GetContestOverallIntroductionPageList",method:"post",data:t})}function r(t){return Object(a["a"])({url:"api/ContestManage/GetContestOverallIntroductionInfo/"+t,method:"post",data:t})}function i(t){return Object(a["a"])({url:"api/ContestManage/AddContestOverallIntroduction",method:"post",data:t})}function u(t){return Object(a["a"])({url:"api/ContestManage/UpdateContestOverallIntroduction",method:"post",data:t})}function s(t){return Object(a["a"])({url:"api/ContestManage/GetContestInformationPageList",method:"post",data:t})}function c(t){return Object(a["a"])({url:"api/ContestManage/GetContestInformationInfo/"+t,method:"post",data:null})}function l(t){return Object(a["a"])({url:"api/ContestManage/AddContestInformation",method:"post",data:t})}function d(t){return Object(a["a"])({url:"api/ContestManage/UpdateContestInformation",method:"post",data:t})}function f(t){return Object(a["a"])({url:"api/ContestManage/GetContestInformationDetailPageList",method:"post",data:t})}function m(t){return Object(a["a"])({url:"api/ContestManage/EditContestInformationDetail",method:"post",data:t})}function p(t){return Object(a["a"])({url:"api/ContestManage/UploadContestCoverPicture",method:"post",data:t})}function h(t){return Object(a["a"])({url:"api/ContestManage/GetContestApplyPageList",method:"post",data:t})}function g(t){return Object(a["a"])({url:"api/ContestManage/GetContestApplyInfo/"+t,method:"post",data:null})}function C(t){return Object(a["a"])({url:"api/ContestManage/ApproveContestApply",method:"post",data:t})}function b(t){return Object(a["a"])({url:"api/ContestManage/GetContestTeamPageList",method:"post",data:t})}function v(t){return Object(a["a"])({url:"api/ContestManage/DissolutionContestTeam/"+t,method:"post"})}function I(t){return Object(a["a"])({url:"api/ContestManage/GetNoContestTeamPageList",method:"post",data:t})}function k(t){return Object(a["a"])({url:"api/ContestManage/ManualTeam",method:"post",data:t})}function O(){return Object(a["a"])({url:"api/ContestManage/AutomaticTeam",method:"post",data:null})}function N(t){return Object(a["a"])({url:"api/ContestManage/GetContestTeamWorkPageList",method:"post",data:t})}function j(t){return Object(a["a"])({url:"api/ContestManage/GetContestTeamWorkInfo/"+t,method:"post",data:null})}function M(t){return Object(a["a"])({url:"api/ContestManage/GetContestReviewRankPageList",method:"post",data:t})}function w(t){return Object(a["a"])({url:"api/ContestManage/GetContestReviewPageList",method:"post",data:t})}function E(t){return Object(a["a"])({url:"api/ContestManage/UpdateContestReviewRank",method:"post",data:t})}function S(t){return Object(a["a"])({url:"api/ContestManage/GetContestVotingRankPageList",method:"post",data:t})}function T(t){return Object(a["a"])({url:"api/ContestManage/GetContestVotingRecordPageList",method:"post",data:t})}function _(t){return Object(a["a"])({url:"api/ContestManage/GetContestTutorMemberPageList/"+t,method:"post"})}function y(t){return Object(a["a"])({url:"api/ContestManage/DelContestTutorMember/"+t,method:"post"})}function D(t){return Object(a["a"])({url:"api/ContestManage/GetTutorMemberPageList",method:"post",data:t})}function $(t){return Object(a["a"])({url:"api/ContestManage/SubmitContestTutorMember",method:"post",data:t})}},"37f9":function(t,e,n){"use strict";var a=n("5f0e"),o=n.n(a);o.a},"5d61":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"maindetail"},[n("div",{staticClass:"titleTel"},[t._v("活动详情")]),n("div",{staticStyle:{width:"100%"}},[n("el-form",{ref:"formInit",attrs:{"label-width":"100px",model:t.formInit,rules:t.rules}},[t._l(t.formInit.dataSource,(function(e,a){return n("div",{key:a},[n("el-form-item",{attrs:{label:"排序"}},[n("el-input",{attrs:{placeholder:"请输入正整数",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode)))",type:"number",max:"999",min:"1",maxlength:"3"},model:{value:e.Sort,callback:function(n){t.$set(e,"Sort",n)},expression:"item.Sort"}})],1),n("el-form-item",{attrs:{label:"中文标题",prop:"dataSource."+a+".Title",rules:{required:!0,message:"请输入中文标题",trigger:"blur"}}},[n("el-input",{attrs:{placeholder:"请输入"},model:{value:e.Title,callback:function(n){t.$set(e,"Title",n)},expression:"item.Title"}})],1),n("el-form-item",{attrs:{label:"英文标题",prop:"dataSource."+a+".Title_EN",rules:{required:!0,message:"请输入英文标题",trigger:"blur"}}},[n("el-input",{attrs:{placeholder:"请输入"},model:{value:e.Title_EN,callback:function(n){t.$set(e,"Title_EN",n)},expression:"item.Title_EN"}})],1),n("el-form-item",[n("div",{attrs:{slot:"label"},slot:"label"},[n("span",{staticStyle:{color:"#F56C6C"}},[t._v("*")]),t._v(" 中文详情 ")]),n("editTinymce",{attrs:{val:e.Details,valIndex:a,boxHeight:200},on:{getval:t.changvalCN}})],1),n("el-form-item",[n("div",{attrs:{slot:"label"},slot:"label"},[n("span",{staticStyle:{color:"#F56C6C"}},[t._v("*")]),t._v(" 英文详情 ")]),n("editTinymce",{attrs:{val:e.Details_EN,valIndex:a,boxHeight:200},on:{getval:t.changvalEN}})],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.formInit.dataSource.length>1,expression:"formInit.dataSource.length > 1"}]},[n("el-button",{attrs:{icon:"el-icon-minus",size:"small",type:"danger"},on:{click:function(n){return t.deleteItemClick(e,a)}}},[t._v("删除活动项")])],1)],1)})),n("el-form-item",[n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:t.addItemClick}},[t._v("增加活动项")])],1)],2)],1),n("div",{staticClass:"bottomButton"},[n("el-button",{attrs:{icon:"el-icon-back",size:"small",type:"info"},on:{click:t.goBack}},[t._v("返回")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:2!=t.isEdit,expression:"isEdit != 2"}],attrs:{icon:"el-icon-circle-check",size:"small",type:"primary"},on:{click:function(e){return t.onSubmit("formInit")}}},[t._v("保存")])],1)])},o=[],r=(n("c5f6"),n("2c51")),i=(n("7b0a"),n("95797")),u={name:"index",components:{editTinymce:i["a"]},computed:{},props:{isEdit:{type:Number,default:0}},watch:{formInit:{handler:function(t,e){var n=t.dataSource.map((function(t){return t.Title})),a=t.dataSource.map((function(t){return t.Title_EN}));n=n.filter((function(t){return""!==t})),a=a.filter((function(t){return""!==t})),this.NameCNcheck=!this.isRepeat(n),this.NameENcheck=!this.isRepeat(a),this.NameCNcheck,this.NameENcheck},immediate:!0,deep:!0}},data:function(){return{formInit:{dataSource:[{Sort:"",Title:"",Title_EN:"",Details:"",Details_EN:"",Id:"",ContestInformationId:this.$route.query.id}]},NameCNcheck:!0,NameENcheck:!0,rules:{}}},created:function(){this.getDetail()},mounted:function(){},methods:{isRepeat:function(t){if(0==t.length)return!1;var e={};for(var n in t){if(e[t[n]])return!0;e[t[n]]=!0}return!1},changvalCN:function(t,e){this.formInit.dataSource[e].Details=t},changvalEN:function(t,e){this.formInit.dataSource[e].Details_EN=t},deleteItemClick:function(t,e){if(1==this.formInit.dataSource.length)return this.$message.closeAll(),void this.$message.warning("至少保留一项");this.formInit.dataSource.length>e&&this.formInit.dataSource.splice(e,1)},addItemClick:function(){var t={Sort:"",Title:"",Title_EN:"",Details:"",Details_EN:"",Id:"",ContestInformationId:this.$route.query.id};this.formInit.dataSource.push(t)},getDetail:function(){var t=this,e={ContestInformationId:this.$route.query.id};Object(r["j"])(e).then((function(e){0===e.data.Code&&e.data.Data&&e.data.Data.length>0&&(t.formInit.dataSource=e.data.Data)}))},goBack:function(){this.$router.go(-1)},onSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.NameCNcheck&&e.NameENcheck?e.validDetails()&&e.onUpdate():e.$message.warning("任务名称有重复项")}))},validDetails:function(){for(var t=!0,e=0;e<this.formInit.dataSource.length;e++){var n=this.formInit.dataSource[e];if(0===n.Details.length){this.$message.warning("请输入中文详情"),t=!1;break}if(0===n.Details_EN.length){this.$message.warning("请输入英文文详情"),t=!1;break}}return t},onUpdate:function(){var t=this,e=this.formInit.dataSource;Object(r["g"])(e).then((function(e){0===e.data.Code&&(t.goBack(),t.$message.success("保存成功"))}))}}},s=u,c=(n("37f9"),n("2877")),l=Object(c["a"])(s,a,o,!1,null,null,null);e["default"]=l.exports},"5f0e":function(t,e,n){},"7b0a":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return u}));n("6b54"),n("c5f6");function a(t,e,n){if(!e)return n(new Error("输入不可以为空"));setTimeout((function(){if(Number(e)){var t=/^[0-9]*[1-9][0-9]*$/,a=t.test(e);a?n():n(new Error("请输入正整数"))}else n(new Error("请输入正整数"))}),0)}function o(t,e,n){var a=/^[1][3-9][0-9]{9}$/;""==e||void 0==e||null==e?n(new Error("请输入正确的电话号码")):a.test(e)||""==e?n():n(new Error("请输入正确的电话号码"))}function r(t,e,n){var a=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9]+\.[a-z]+$/;""==e||void 0==e||null==e?n(new Error("请输入正确的邮箱")):a.test(e)?n():n(new Error("请输入正确的邮箱"))}function i(t,e,n){""==e||void 0==e||null==e||-1==e.indexOf("@")?n(new Error("请输入正确的邮箱")):n()}function u(t,e,n){if(void 0==e||null==e)return n(new Error("输入不可以为空"));setTimeout((function(){e=e.toString(),e.length>0?e.length>3||parseFloat(e)<.1||parseFloat(e)>.9?n(new Error("输入0.1-0.9之间")):n():n(new Error("输入不可以为空"))}),0)}}}]);