(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35d7757a"],{"2ceb":function(t,e,a){"use strict";var i=a("567c"),n=a.n(i);n.a},5568:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contract common"},[a("div",{staticClass:"back",on:{click:t.goBack}},[a("i",{staticClass:"el-icon-arrow-left"}),a("span",[t._v(t._s(t.$t("lang.back")))])]),a("div",{staticClass:"needInfoMain"},[a("div",{staticClass:"item"},[a("div",{staticClass:"itemImg",style:{background:"#f1f1f1 url("+t.detailData.CoverPictureUrl+")"}}),a("div",[a("div",{staticClass:"name"},[t._v(t._s(t.detailData.Title))]),a("div",{staticClass:"key"},[t._v(t._s(t.detailData.SeOrPtTypeName))]),a("div",{staticClass:"desc"},[t._v(t._s(t.detailData.Desc))])])]),a("div",{staticClass:"partner"},[null!=t.detailData.PartyAInfo?a("div",{staticClass:"partnerItem"},[t.detailData.PartyAInfo.EnterpriseLogoUrl?a("div",{staticClass:"itemImg",style:{background:"#f6f6f6 url("+t.detailData.PartyAInfo.EnterpriseLogoUrl+")"}}):a("div",{staticClass:"itemImg"},[a("img",{attrs:{src:t.defaultHeader}})]),a("div",[a("div",{staticClass:"name"},[t._v(t._s(t.detailData.PartyAInfo.CorporateName))]),a("div",{staticClass:"desc"},[t._v(t._s(t.detailData.PartyAInfo.CorporateContact))])])]):t._e(),null!=t.detailData.PartyBInfo?a("div",{staticClass:"partnerItem"},[t.detailData.PartyBInfo.EnterpriseLogoUrl?a("div",{staticClass:"itemImg",style:{background:"#f6f6f6 url("+t.detailData.PartyBInfo.EnterpriseLogoUrl+")"}}):a("div",{staticClass:"itemImg"},[a("img",{attrs:{src:t.defaultHeader}})]),a("div",[a("div",{staticClass:"name"},[t._v(t._s(t.detailData.PartyBInfo.CorporateName))]),a("div",{staticClass:"desc"},[t._v(t._s(t.detailData.PartyBInfo.CorporateContact))])])]):t._e()]),a("el-form",{ref:"formRef",attrs:{model:t.form,rules:t.rules,disabled:t.mContractStates>0}},[a("el-form-item",{attrs:{label:t.$t("lang.personalcenter_contract_amount"),prop:"ContractAmount"}},[a("el-input",{attrs:{placeholder:t.$t("lang.inputholder")},model:{value:t.form.ContractAmount,callback:function(e){t.$set(t.form,"ContractAmount",e)},expression:"form.ContractAmount"}})],1),a("div",[a("el-form-item",[a("div",{attrs:{solt:"label"}},[a("span",{staticStyle:{color:"#F56C6C"}},[t._v("*")]),t._v(" "+t._s(t.$t("lang.personalcenter_contract_Uploadcontract"))+" ")]),a("File-upload",{ref:"fileref",attrs:{limit:1,type:"imgfile",uploadURL:t.uploadProjectContractURL,"init-file-list":t.filelist,"war-str":t.$t("lang.war_fileimg"),"signal-size":3,"total-size":3},on:{filesChange:t.filesChange}})],1)],1)],1),t._l(t.detailData.CommentList,(function(e,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:null!=t.mContractStates&&t.mContractStates>2,expression:"mContractStates != null && mContractStates > 2"}],key:i,staticClass:"evaluate"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("lang.personalcenter_contract_evaluate")))]),a("div",{staticClass:"starDiv"},[a("span",[t._v(t._s(t.$t("lang.personalcenter_contract_evaluate")))]),a("el-rate",{attrs:{disabled:!0},model:{value:e.Star,callback:function(a){t.$set(e,"Star",a)},expression:"item.Star"}})],1),a("div",{staticClass:"user"},[a("img",{attrs:{src:e.CommentUserHeadPortrait}}),a("div",[a("div",{staticClass:"name"},[t._v(t._s(e.CommentUserName))]),a("div",{staticClass:"desc"},[t._v(t._s(e.CommentUserName))])])]),a("el-input",{attrs:{type:"textarea",disabled:!0},model:{value:e.Content,callback:function(a){t.$set(e,"Content",a)},expression:"item.Content"}})],1)})),a("div",{directives:[{name:"show",rawName:"v-show",value:null!=t.mContractStates&&3==t.mContractStates,expression:"mContractStates != null && mContractStates == 3"}],staticClass:"evaluate"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("lang.personalcenter_contract_evaluate")))]),a("div",{staticClass:"starDiv"},[a("span",[t._v(t._s(t.$t("lang.personalcenter_contract_evaluate")))]),a("el-rate",{model:{value:t.star,callback:function(e){t.star=e},expression:"star"}})],1),a("div",{staticClass:"user"},[a("img",{attrs:{src:t.defaultHeader}}),a("div",[a("div",{staticClass:"name"},[t._v(t._s(t.isPartyA?t.detailData.PartyAInfo.CorporateName:t.detailData.PartyBInfo.CorporateName))]),a("div",{staticClass:"desc"},[t._v(t._s(t.isPartyA?t.detailData.PartyAInfo.CorporateContact:t.detailData.PartyBInfo.CorporateContact))])])]),a("el-input",{attrs:{type:"textarea",placeholder:t.$t("lang.inputholder")},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),a("div",{staticClass:"bottom right"},[a("div",{directives:[{name:"show",rawName:"v-show",value:3==t.mContractStates,expression:"mContractStates == 3"}],staticClass:"itemButton",on:{click:t.commentClick}},[a("span",[t._v(t._s(t.$t("lang.personalcenter_contract_comment")))])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.mContractStates||2==t.mContractStates,expression:"mContractStates == 0 || mContractStates == 2"}],staticClass:"bottom"},[a("div",{staticClass:"itemButton",on:{click:t.bottomBtClick}},[a("span",[t._v(t._s(0==t.mContractStates?t.$t("lang.submit"):t.$t("lang.sure")))]),a("i",{staticClass:"el-icon-right"})])])],2)])},n=[],r=a("c24f"),o=a("68f8"),s={name:"need",props:{},components:{FileUpload:o["a"]},data:function(){var t=a("3609");return{defaultHeader:t,form:{ContractAmount:""},rules:{ContractAmount:[{required:!0,message:this.$t("lang.personalcenter_contract_amount_msg"),trigger:"blur"}]},btnIsDisabled:!1,star:1,content:"",detailData:{PartyAInfo:{CorporateName:""},PartyBInfo:{CorporateName:""}},filelist:[],isPartyA:!1,uploadProjectContractURL:"/api/ClientMember/UploadProjectContract",mContractStates:0}},created:function(){this.getDetail()},watch:{},methods:{filesChange:function(t){},goBack:function(){this.$router.go(-1)},getDetail:function(){var t=this;Object(r["m"])(this.$route.query.id).then((function(e){if(0==e.data.Code)if(t.detailData=e.data.Data,t.isPartyA=localStorage.getItem("UserId")==t.detailData.PartyA,1==t.detailData.Status?1==t.detailData.ContractStatus?t.mContractStates=0:2==t.detailData.ContractStatus?2==t.detailData.IsContractUploader?t.mContractStates=2:3==t.detailData.IsContractUploader&&(t.mContractStates=1):3==t.detailData.ContractStatus&&(t.detailData.IsEvaluation?t.mContractStates=4:t.mContractStates=3):t.mContractStates=4,t.mContractStates>0){t.form.ContractAmount=t.detailData.ContractAmount,t.filelist=[];var a={FileName:t.detailData.ContractFileName?t.detailData.ContractFileName:t.$t("lang.personalcenter_contract_contractFilename"),ShowLink:t.detailData.ContractFileUrl,FileId:t.detailData.ContractFile};t.filelist.push(a)}else t.form.ContractAmount=t.detailData.Price}))},commentClick:function(){var t=this,e=localStorage.getItem("UserId");if(e!=this.detailData.PartyA&&e!=this.detailData.PartyB)return this.$message.closeAll(),void this.$message.error(this.$t("lang.msg_noauthority"));if(null==this.content||""==this.content)return this.$message.closeAll(),void this.$message.error(this.$t("lang.inputholder")+this.$t("lang.personalcenter_contract_comment"));if(!this.btnIsDisabled){this.btnIsDisabled=!0,setTimeout((function(){t.btnIsDisabled=!1}),5e3);var a={TransactionRecordId:this.$route.query.id,Star:this.star,Content:this.content};Object(r["y"])(a).then((function(e){0==e.data.Code&&(t.$message.closeAll(),t.$message.success(t.$t("lang.personalcenter_contract_operate_success")),setTimeout((function(){window.location.reload()}),500))}))}},bottomBtClick:function(){var t=this,e=localStorage.getItem("UserId");if(e!=this.detailData.PartyA&&e!=this.detailData.PartyB)return this.$message.closeAll(),void this.$message.error(this.$t("lang.msg_noauthority"));if(!this.btnIsDisabled)if(this.btnIsDisabled=!0,setTimeout((function(){t.btnIsDisabled=!1}),2e3),0==this.mContractStates){var a=this.$refs["fileref"].fileList;if(void 0==a||0==a.length)return this.$message.closeAll(),void this.$message.error(this.$t("lang.personalcenter_contract_Uploadcontract_msg"));var i={transactionRecordId:this.$route.query.id,ContractAmount:this.form.ContractAmount,ContractFile:a[0].FileId};this.$refs["formRef"].validate((function(e){e&&Object(r["z"])(i).then((function(e){0==e.data.Code&&(t.$message.closeAll(),t.$message.success(t.$t("lang.done")),setTimeout((function(){window.location.reload()}),500))}))}))}else 2==this.mContractStates&&Object(r["b"])(this.$route.query.id).then((function(e){0==e.data.Code&&(t.$message.closeAll(),t.$message.success(t.$t("lang.done")),setTimeout((function(){window.location.reload()}),500))}))}}},l=s,c=(a("2ceb"),a("2877")),u=Object(c["a"])(l,i,n,!1,null,null,null);e["default"]=u.exports},"567c":function(t,e,a){},"68f8":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"FileUpload"},[t._l(t.fileList,(function(e,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.isSingleImgShow,expression:"isSingleImgShow"}],key:i,staticClass:"fileDiv"},[a("img",{attrs:{src:e.ShowLink?e.ShowLink:"",alt:""}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isDisabled,expression:"!isDisabled"}],staticClass:"fileDivBg"},[a("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.deleteFile(i)}}})])])})),a("el-upload",{directives:[{name:"show",rawName:"v-show",value:!t.isSingleImgShow,expression:"!isSingleImgShow"}],ref:"upload",staticClass:"avatar-uploader",attrs:{disabled:t.isDisabled,drag:"",action:t.baseURL,headers:t.myHeaders,accept:t.typeList,multiple:!1,limit:t.limit,"on-success":t.handleAvatarSuccess,"on-error":t.handlError,"on-exceed":t.handleExceed,"before-upload":t.beforeUpload,"file-list":t.getFileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-preview":t.handlePreview}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v(" "+t._s(t.$t("lang.fileupload_title1"))+" "),a("em",[t._v(t._s(t.$t("lang.fileupload_title2")))]),"image"===t.type?a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.warStr))]):t._e()])])],2)},n=[],r=(a("99af"),a("4160"),a("fb6a"),a("a434"),a("a9e3"),a("159b"),{name:"",props:{limit:{type:Number,default:1},type:{type:String,default:"image"},uploadURL:{type:String,default:""},initFileList:{type:Array},warStr:{type:String,default:"只能上传不超过10MB大小的图片或文件"},signalSize:{type:Number,default:3},totalSize:{type:Number,default:9},isDisabled:{type:Boolean,default:!1}},data:function(){return{isInit:!0,fileList:[],myHeaders:{"s-token":localStorage.getItem("Token"),"s-lang":localStorage.getItem("Lang")},imgFileType:".jpg,.png,.jpeg,.doc,.docx,.xls,.xlsx,.pdf,.ppt,.pptx",imageType:".jpg, .jpeg, .png",videoType:".mp4",audioType:".mp4",fileType:".doc,.docx,.xls,.xlsx,.pdf,.ppt,.pptx",fileSizeCount:0}},computed:{baseURL:function(){return global_config.BASE_URL+this.uploadURL},typeList:function(){return"image"===this.type?this.imageType:"video"===this.type?this.videoType:"audio"===this.type?this.audioType:"file"===this.type?this.fileType:"imgfile"===this.type?this.imgFileType:void 0},isSingleImgShow:function(){return"image"===this.type&&1==this.limit&&1==this.getFileList.length},getFileList:function(){var t=this;return 0==this.fileList.length&&void 0!=this.initFileList&&null!=this.initFileList&&this.initFileList.length>0&&this.isInit&&(this.isInit=!1,this.fileList=this.initFileList.slice(),this.fileList.forEach((function(e){t.$set(e,"name",null==e.FileName||""==e.FileName?"fileName":e.FileName),t.$set(e,"url",e.ShowLink)}))),this.fileList}},created:function(){},watch:{},methods:{handleAvatarSuccess:function(t,e){0===t.Code?(this.$set(t.Data,"name",t.Data.FileName),this.$set(t.Data,"url",t.Data.ShowLink),this.fileList=this.fileList.concat(t.Data),this.notifyFileListSizeChange(),this.$emit("clearValidate")):20002===t.Code||20001===t.Code?(this.$message.closeAll(),this.loginInfoExpired()):(this.$message.closeAll(),this.$message.error(t.Message))},handlError:function(t,e,a){this.$message.closeAll(),this.$message.error(this.$t("lang.war_file_uploadfailed"))},handleExceed:function(t,e){this.$message.warning(this.$t("lang.war_file_exceed_pre")+this.limit+this.$t("lang.war_file_exceed_sub"))},beforeUpload:function(t){var e=t.size/1024/1024;if(this.fileSizeCount<1024){var a=e<this.signalSize;return a||(this.$message.closeAll(),this.$message.error(this.$t("lang.war_file_signalsize")+this.signalSize+"MB!")),this.fileSizeCount+=e,a}return this.$message.closeAll(),this.$message.error(this.$t("lang.war_file_totalsize")+this.totalSize+"MB!"),!1},deleteFile:function(t){this.fileList.splice(t,1),this.$emit("validateBanner"),this.notifyFileListSizeChange()},handleRemove:function(t,e){this.fileList=e,this.notifyFileListSizeChange()},handlePreview:function(t){window.open(t.ShowLink,"_blank")},notifyFileListSizeChange:function(){0!=this.fileList.length&&1!=this.fileList.length||this.$emit("filesChange",this.fileList)},loginInfoExpired:function(){var t=this,e=localStorage.getItem("Lang"),a="CN"==e?"登录已过期，请重新登录":"Login has expired, please log in again",i="CN"==e?"提示":"tip",n="CN"==e?"确定":"Sure";this.$alert(a,i,{confirmButtonText:n,callback:function(e){t.$store.commit("getUserName",""),t.$store.commit("getCorporateName",""),t.$store.commit("getHeadPortraitUrl",""),t.$store.commit("setMemberIdentity",""),localStorage.removeItem("userInfo"),localStorage.removeItem("CorporateName"),localStorage.removeItem("Category"),localStorage.removeItem("UserId"),localStorage.removeItem("Token"),localStorage.removeItem("HeadPortraitUrl"),localStorage.removeItem("UserName"),localStorage.removeItem("changeLang"),localStorage.removeItem("competitionDetail"),sessionStorage.clear(),t.$router.push("/register/loginpage")}})}}}),o=r,s=(a("f6fb"),a("2877")),l=Object(s["a"])(o,i,n,!1,null,null,null);e["a"]=l.exports},"87cd":function(t,e,a){},"99af":function(t,e,a){"use strict";var i=a("23e7"),n=a("d039"),r=a("e8b5"),o=a("861d"),s=a("7b0b"),l=a("50c4"),c=a("8418"),u=a("65f0"),d=a("1dde"),m=a("b622"),f=a("2d00"),p=m("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",C=f>=51||!n((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),v=d("concat"),b=function(t){if(!o(t))return!1;var e=t[p];return void 0!==e?!!e:r(t)},y=!C||!v;i({target:"Array",proto:!0,forced:y},{concat:function(t){var e,a,i,n,r,o=s(this),d=u(o,0),m=0;for(e=-1,i=arguments.length;e<i;e++)if(r=-1===e?o:arguments[e],b(r)){if(n=l(r.length),m+n>h)throw TypeError(g);for(a=0;a<n;a++,m++)a in r&&c(d,m,r[a])}else{if(m>=h)throw TypeError(g);c(d,m++,r)}return d.length=m,d}})},c24f:function(t,e,a){"use strict";a.d(e,"q",(function(){return n})),a.d(e,"t",(function(){return r})),a.d(e,"u",(function(){return o})),a.d(e,"x",(function(){return s})),a.d(e,"h",(function(){return l})),a.d(e,"C",(function(){return c})),a.d(e,"B",(function(){return u})),a.d(e,"a",(function(){return d})),a.d(e,"f",(function(){return m})),a.d(e,"e",(function(){return f})),a.d(e,"w",(function(){return p})),a.d(e,"n",(function(){return h})),a.d(e,"g",(function(){return g})),a.d(e,"m",(function(){return C})),a.d(e,"z",(function(){return v})),a.d(e,"b",(function(){return b})),a.d(e,"y",(function(){return y})),a.d(e,"i",(function(){return _})),a.d(e,"A",(function(){return S})),a.d(e,"k",(function(){return I})),a.d(e,"d",(function(){return $})),a.d(e,"r",(function(){return w})),a.d(e,"v",(function(){return D})),a.d(e,"l",(function(){return L})),a.d(e,"s",(function(){return A})),a.d(e,"c",(function(){return P})),a.d(e,"o",(function(){return j})),a.d(e,"p",(function(){return x})),a.d(e,"j",(function(){return O}));var i=a("b775");function n(t){return Object(i["a"])({url:"api/ClientMember/MemberLogin",method:"post",data:t})}function r(t){return Object(i["a"])({url:"api/ClientMember/RegisteredMember",method:"post",data:t})}function o(t){return Object(i["a"])({url:"api/ClientMember/RetrievePassword",method:"post",data:t})}function s(t){return Object(i["a"])({url:"api/ClientMember/SendEmailCaptcha",method:"post",data:t})}function l(){return Object(i["a"])({url:"api/ClientMember/GetMemberInfo",method:"post",data:null})}function c(t){return Object(i["a"])({url:"api/ClientMember/UploadHeadPortrait",method:"post",data:t})}function u(t){return Object(i["a"])({url:"api/ClientMember/UpdateMemberInfo",method:"post",data:t})}function d(t){return Object(i["a"])({url:"api/ClientMember/CaptchaVerification",method:"post",data:t})}function m(){return Object(i["a"])({url:"api/ClientMember/GetCommunityDemandList",method:"post",data:null})}function f(t){return Object(i["a"])({url:"api/ClientMember/GetCommunityDemandInfo/"+t,method:"post",data:null})}function p(t){return Object(i["a"])({url:"api/ClientMember/SelectCommunityContractor",method:"post",data:t})}function h(t){return Object(i["a"])({url:"api/ClientMember/GetTransactionRecordList",method:"post",data:t})}function g(t){return Object(i["a"])({url:"api/ClientMember/GetCommunityServiceList",method:"post",data:t})}function C(t){return Object(i["a"])({url:"api/ClientMember/GetTransactionRecordInfo?transactionRecordId="+t,method:"post",data:t})}function v(t){return Object(i["a"])({url:"api/ClientMember/SubmitProjectContract",method:"post",data:t})}function b(t){return Object(i["a"])({url:"api/ClientMember/ConfirmProjectContract?Id="+t,method:"post",data:null})}function y(t){return Object(i["a"])({url:"api/ClientMember/SubmitComment",method:"post",data:t})}function _(t){return Object(i["a"])({url:"/api/CilentIncubator/GetMyEnterprise/"+t,method:"get"})}function S(t){return Object(i["a"])({url:"/api/CilentIncubator/TutorChooseEnterprise",method:"post",data:t})}function I(t){return Object(i["a"])({url:"/api/CilentIncubator/GetMyTutor/"+t,method:"get"})}function $(t){return Object(i["a"])({url:"/api/CilentIncubator/FeeOrderList",method:"post",data:t})}function w(t){return Object(i["a"])({url:"/api/CilentPay/MyPayOrder",method:"post",data:t})}function D(t){return Object(i["a"])({url:"/api/CilentPay/SaveReceipt",method:"post",data:t})}function L(t){return Object(i["a"])({url:"/api/CilentPay/GetReceipt/"+t,method:"get"})}function A(t,e){return Object(i["a"])({url:"/api/CilentPay/PayOrderInfo?memberId="+t+"&orderId="+e,method:"get"})}function P(t){return Object(i["a"])({url:"/api/CilentPay/DemandReceipt",method:"post",data:t})}function j(t){return Object(i["a"])({url:"/api/CilentIncubator/GetTutorMember/"+t,method:"get"})}function x(t){return Object(i["a"])({url:"/api/CilentMisc/IsTutorChoose",method:"get",data:t})}function O(t){return Object(i["a"])({url:"/api/CilentEquipment/GetMyEquipmentBorrowList",method:"post",data:t})}},f6fb:function(t,e,a){"use strict";var i=a("87cd"),n=a.n(i);n.a},fb6a:function(t,e,a){"use strict";var i=a("23e7"),n=a("861d"),r=a("e8b5"),o=a("23cb"),s=a("50c4"),l=a("fc6a"),c=a("8418"),u=a("b622"),d=a("1dde"),m=a("ae40"),f=d("slice"),p=m("slice",{ACCESSORS:!0,0:0,1:2}),h=u("species"),g=[].slice,C=Math.max;i({target:"Array",proto:!0,forced:!f||!p},{slice:function(t,e){var a,i,u,d=l(this),m=s(d.length),f=o(t,m),p=o(void 0===e?m:e,m);if(r(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!r(a.prototype)?n(a)&&(a=a[h],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return g.call(d,f,p);for(i=new(void 0===a?Array:a)(C(p-f,0)),u=0;f<p;f++,u++)f in d&&c(i,u,d[f]);return i.length=u,i}})}}]);